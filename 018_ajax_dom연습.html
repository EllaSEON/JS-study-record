<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AJAX DOM API로 가져오기</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.6.1.min.js" integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script>
<link rel="stylesheet" href="011_for.css">
</head>
<body>
  <div class="container">
    <div class="row">
        <!-- <div class="col-sm-4">
          <img src="https://via.placeholder.com/600" class="w-100">
          <h5>Card title</h5>
          <p>가격 : 70000</p>
        </div> -->
    </div>
  </div> 

<script>
  var products = [
    { id : 0, price : 70000, title : 'Blossom Dress' },
    { id : 1, price : 50000, title : 'Springfield Shirt' },
    { id : 2, price : 60000, title : 'Black Monastery' }
  ];

</script> 

<!-- 상품더보기 버튼 -->
<div class="container">
  <button class="btn btn-danger">더보기</button>
</div>

<!-- 더보기 버튼 누르면 상품 3개 가져와서 출력하기 -->
<script>

const moreBtn = document.querySelector('.btn-danger');
const row = document.querySelector('.row');

moreBtn.addEventListener('click',()=>{
  row.innerHTML = "";
  fetch('https://codingapple1.github.io/js/more1.json',{
    method:'GET'
  }).then(res=>res.json())
  .then((data)=>{
    data.forEach((onedata)=>{
      const div = document.createElement('div');
      const h5 = document.createElement('h5');
      const p = document.createElement('p')
      const row = document.querySelector('.row')
      const img = document.createElement('img')

      div.classList.add('col-sm-4')
      h5.innerText = onedata.title;
      p.innerText = onedata.price;
      img.setAttribute('src','https://via.placeholder.com/600')
      img.classList.add('w-100')

      div.appendChild(img);
      div.appendChild(h5);
      div.appendChild(p);
      row.appendChild(div);
    })
  })
  
})


//더보기 2회 누르면 7,8,9번째 상품 더 가져오기. 3번 누르면 더보기 버튼 안보이게 하기

// let count = 0;
// document.querySelector('.btn').addEventListener('click',()=>{
//   count +=1;
//   if(count===1){
//     fetch('https://codingapple1.github.io/js/more1.json')
//     .then(res=>res.json())
//     .then(data=>{
//      data.forEach((a,i)=>{
//       let 첫번째카드목록 =
//         `<div class="col-sm-4">
//           <img src="https://via.placeholder.com/600" class="w-100">
//           <h5>${data[i].title}</h5>
//           <p>가격 : ${data[i].price}</p>
//         </div>`
//       document.querySelector('.row').insertAdjacentHTML('beforeend',첫번째카드목록)
//      })
//     })
//   }else if(count===2){
//     fetch('https://codingapple1.github.io/js/more2.json')
//     .then(res=>res.json())
//     .then(data=>{
//      data.forEach((a,i)=>{
//       let 두번째카드목록 =
//         `<div class="col-sm-4">
//           <img src="https://via.placeholder.com/600" class="w-100">
//           <h5>${data[i].title}</h5>
//           <p>가격 : ${data[i].price}</p>
//         </div>`
//       document.querySelector('.row').insertAdjacentHTML('beforeend',두번째카드목록)
//      })
//     })
//   }else{
//     document.querySelector('.btn').style.display='none';
//   }
// })

 //마지막 과제 : 중복된 코드는 함수로 만들어놓고 써보기
 // 함수화할때는 변수 있으면 파라미터로 바꾸는게 좋다.




// let count = 0;
// document.querySelector('.btn').addEventListener('click',()=>{
//   count +=1;
//   if(count===1){
//     fetch('https://codingapple1.github.io/js/more1.json')
//     .then(res=>res.json())
//     .then(data=>{
//       data.forEach((a,i)=>{
//       let 첫번째카드목록 =
//         `<div class="col-sm-4">
//           <img src="https://via.placeholder.com/600" class="w-100">
//           <h5>${data[i].title}</h5>
//           <p>가격 : ${data[i].price}</p>
//         </div>`
//       document.querySelector('.row').insertAdjacentHTML('beforeend',첫번째카드목록)
//   })
//     })
//   }else if(count===2){
//     fetch('https://codingapple1.github.io/js/more2.json')
//     .then(res=>res.json())
//     .then(data=>{
//      data.forEach((a,i)=>{
//       let 첫번째카드목록 =
//         `<div class="col-sm-4">
//           <img src="https://via.placeholder.com/600" class="w-100">
//           <h5>${data[i].title}</h5>
//           <p>가격 : ${data[i].price}</p>
//         </div>`
//       document.querySelector('.row').insertAdjacentHTML('beforeend',첫번째카드목록)
//      })
//     })
//   }else{
//     document.querySelector('.btn').style.display='none';
//   }
// })



</script>


</body>
</html>